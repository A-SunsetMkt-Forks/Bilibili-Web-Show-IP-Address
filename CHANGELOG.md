# Changelog

## v1.6.4

### 修复

* 匹配 URL 时去除查询参数和哈希值。[#101](https://github.com/maxchang3/Bilibili-Web-Show-IP-Location/issues/101)

## v.1.6.3

### 适配

* 适配番剧（影视）页面更新。

## v1.6.2

### 适配

* 适配漫画详情页。

## v1.6.0

### 优化

* 新版评论系统（基于 Lit）：当 IP 属地不存在时，移除相应元素。
* 专栏：在插入 IP 属地信息前，先检查是否已存在。

## v1.5.9

### 适配

* 适配基于 Lit 的新版评论系统、删除临时版本。

## v1.5.18

### 适配

* 针对单独动态页的元素结构调整。

### 优化

* 新版评论区：在插入 IP 属地信息前，检查是否已存在或已插入相关信息。

## v1.5.17

### 修复

* 初始化 `_INITIAL_STATE__` 值，修复 Hook 顺序错误导致的页面加载异常。

## v1.5.16

### 临时

* 强制恢复评论区为 `comment-pc-vue.next.js` 版本。

## v1.5.12

### 修复

* 修复在切换动态页的 UP 主名称时，无法获取 IP 属地的问题。

## v1.5.10

### 适配

* 文章页评论区功能。
* 专栏作者 IP 属地显示。

## v1.5.9

### 适配

* 小黑屋功能。

## v1.5.8

### 适配

* `pc-comment-vue.next.js`：基于 Hook Vue3 应用，将 `__vue__` 暴露到元素以恢复原有逻辑。

### 优化

* 重写旧版评论的 Hook 逻辑，参考其他脚本。
* 对旧版评论系统，直接创建相关元素（如 `.reply-location`），以适配已有样式。
* 避免 IP 属地信息混淆：当接口不存在或无法获取 IP 属地时，不再显示「IP 属地：未知」。

## v1.5.7

### 适配

* 适配拜年祭页面。

### 临时

* 临时适配 `pc-comment-vue.next.js`。

## v1.5.5

### 适配

* 动态主页更新。
* 话题页面。

## v1.5.4

### 适配

* 主页动态页更新。

## v1.5.3

### 优化

* 移除 Hook XHR 的临时方案，B 站已修复相关问题。

## v1.5.0

### 重构

* 重写 Hook XHR，移除对外部依赖的需求。

### 适配

* 番剧页面更新。

## v1.4.8

### 临时

* 通过 Hook XHR 解决旧版请求未携带 Cookie 的问题。

### 优化

* 调整动态页的 URL 匹配逻辑。

## v1.4.7

### 适配

* 课程页面。

## v1.4.6

### 修复

* 修复动态主页 URL 匹配 `?` 结尾的错误。

## v1.4.4

### 修复

* 修复 Safari 浏览器中新旧版逻辑检查的问题。

## v1.4.3

### 适配

* 话题页、新版动态页以及单独动态页。

## v1.4.2

### 适配

* 新版单独动态页。

## v1.4.1

### 修复

* 使用 `unsafeWindow` 方式正确访问 `window.bbComment` 以完成注入。

## v1.4.0

### 优化

* 项目迁移至 `vite-plugin-monkey`。

---

## v0.1 ~ v1.3 (legacy)

基本功能实现。

### 适配

* 视频。
* 番剧。
* 播放列表。
* 主页动态。

### 修复

* 修复动态 IP 逻辑错误
